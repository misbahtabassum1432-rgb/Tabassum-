from flask import Flask, request, jsonify\nimport cv2\nimport numpy as np\n\napp = Flask(__name__)\n\n@app.route('/detect_eyes', methods=['POST'])\ndef detect_eyes():\n    # Get the image from the request\n    file = request.files['image']\n    image = cv2.imdecode(np.frombuffer(file.read(), np.uint8), cv2.IMREAD_COLOR)\n\n    # Load the pre-trained Haar Cascade classifier for eye detection\n    eye_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + 'haarcascade_eye.xml')\n    \n    # Convert the image to grayscale\n    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    \n    # Detect eyes\n    eyes = eye_cascade.detectMultiScale(gray, scaleFactor=1.1, minNeighbors=5, minSize=(30, 30))\n\n    # Draw rectangles around the eyes\n    for (x, y, w, h) in eyes:\n        cv2.rectangle(image, (x, y), (x + w, y + h), (255, 0, 0), 2)\n    \n    # Convert the image back to RGB and serialize it to return\n    _, buffer = cv2.imencode('.jpg', image)\n    response_image = np.array(buffer).tobytes()\n\n    return jsonify({'eyes': len(eyes)}), 200, {'Content-Type': 'image/jpeg','Content-Disposition': 'attachment; filename=detected_eyes.jpg', 'Content-Length': str(len(response_image))} \n\nif __name__ == '__main__':\n    app.run(debug=True)\n